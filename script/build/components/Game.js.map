{"version":3,"sources":["../../src/components/Game.js"],"names":["Game","canvas","_canvas","document","querySelector","context","getContext","_state","_winner","_world","update","_draw","_showWinner","draw","window","requestAnimationFrame","_update","bind","stop","winner","CENTER_X","width","WINNER_TEXT","name","beginPath","font","textAlign","fillStyle","fillText","player","score","points","_stop","WIDTH","HEIGHT","height","ball","enemy","init","subscribe","checkWinner"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;;;IAEaA,I,WAAAA,I;AACZ,eAAYC,MAAZ,EAAoB;AAAA;;AACnB,OAAKC,OAAL,GAAeC,SAASC,aAAT,CAAuB,MAAMH,MAA7B,CAAf;AACA,OAAKI,OAAL,GAAe,KAAKH,OAAL,CAAaI,UAAb,CAAwB,IAAxB,CAAf;AACA,OAAKC,MAAL,GAAc,CAAd;AACA,OAAKC,OAAL,GAAe,EAAf;AACA;;;;4BAES;AACT,OAAI,KAAKD,MAAL,IAAe,CAAnB,EAAsB;AACrB,SAAKE,MAAL,CAAYC,MAAZ,CAAmB,KAAKL,OAAxB;AACA,SAAKM,KAAL;AACA,IAHD,MAIK,IAAI,KAAKJ,MAAL,IAAe,CAAnB,EAAsB;AAC1B,SAAKK,WAAL,CAAiB,KAAKJ,OAAtB;AACA;AACD;;;0BAEO;AACP,QAAKC,MAAL,CAAYI,IAAZ,CAAiB,KAAKR,OAAtB;AACAS,UAAOC,qBAAP,CAA6B,KAAKC,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CAA7B;AACA;;;0BAEO;AACP,QAAKR,MAAL,CAAYS,IAAZ;AACA;;;8BAEWC,M,EAAQ;AACnB,OAAMC,WAAY,KAAKlB,OAAL,CAAamB,KAAb,GAAmB,CAArC;AACA,OAAMC,iCAA+BH,OAAOI,IAAtC,MAAN;;AAEA,QAAKlB,OAAL,CAAamB,SAAb;AACA,QAAKnB,OAAL,CAAaoB,IAAb,GAAoB,YAApB;AACA,QAAKpB,OAAL,CAAaqB,SAAb,GAAyB,QAAzB;AACA,QAAKrB,OAAL,CAAasB,SAAb,GAAyB,MAAzB;AACA,QAAKtB,OAAL,CAAauB,QAAb,CAAsBN,WAAtB,EAAmCF,QAAnC,EAA6C,GAA7C;AACA;;;8BAEWS,M,EAAQ;AACnB,OAAIA,OAAOC,KAAP,CAAaC,MAAb,IAAuB,EAA3B,EAA+B;AAC9B,SAAKxB,MAAL,GAAc,CAAd;AACA,SAAKyB,KAAL;AACA,SAAKxB,OAAL,GAAeqB,MAAf;AACA;AACD;;;0BAEO;AACP,OAAMI,QAAS,KAAK/B,OAAL,CAAamB,KAA5B;AACA,OAAMa,SAAS,KAAKhC,OAAL,CAAaiC,MAA5B;;AAEA,OAAIC,OAAS,eAAS,OAAT,EAAkB,CAAlB,EAAqBH,QAAM,CAA3B,EAA8BC,SAAO,CAArC,EAAwC,CAAxC,EAA2C,GAA3C,CAAb;AACA,OAAIL,SAAS,6BAAgB,EAAhB,EAAoB,GAApB,EAAyB,OAAzB,EAAkC,CAAlC,EAAqCK,SAAO,CAAP,GAAW,EAAhD,EAAoD,CAApD,CAAb;AACA,OAAIG,QAAS,6BAAgB,EAAhB,EAAoB,GAApB,EAAyB,OAAzB,EAAkCJ,QAAQ,EAA1C,EAA8CC,SAAO,CAAP,GAAU,EAAxD,EAA4D,CAA5D,CAAb;;AAEA,QAAKzB,MAAL,GAAqB,iBAAU,OAAV,EAAmBwB,KAAnB,EAA0BC,MAA1B,CAArB;AACA,QAAKzB,MAAL,CAAYoB,MAAZ,GAAqBA,MAArB;AACA,QAAKpB,MAAL,CAAY4B,KAAZ,GAAqBA,KAArB;AACA,QAAK5B,MAAL,CAAY2B,IAAZ,GAAqBA,IAArB;AACA,QAAK3B,MAAL,CAAY6B,IAAZ;;AAEA,QAAK7B,MAAL,CAAY8B,SAAZ,CAAsB,OAAtB,EAA+B,KAAKC,WAAL,CAAiBvB,IAAjB,CAAsB,IAAtB,CAA/B;;AAEAH,UAAOC,qBAAP,CAA6B,KAAKC,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CAA7B;AACA","file":"Game.js","sourcesContent":["import { World } \t   from './World.js'\nimport { Ball } \t   from './Ball.js'\nimport { LocalPlayer } from './LocalPlayer.js'\nimport { EnemyPlayer } from './EnemyPlayer.js'\n\nexport class Game {\n\tconstructor(canvas) {\n\t\tthis._canvas = document.querySelector('#' + canvas)\n\t\tthis.context = this._canvas.getContext('2d')\n\t\tthis._state = 0\n\t\tthis._winner = {}\n\t}\n\n\t_update() {\n\t\tif (this._state == 0) {\n\t\t\tthis._world.update(this.context)\n\t\t\tthis._draw()\t\n\t\t}\n\t\telse if (this._state == 2) {\n\t\t\tthis._showWinner(this._winner)\n\t\t}\n\t}\n\n\t_draw() {\n\t\tthis._world.draw(this.context)\n\t\twindow.requestAnimationFrame(this._update.bind(this))\n\t}\n\n\t_stop() {\n\t\tthis._world.stop()\n\t}\n\n\t_showWinner(winner) {\n\t\tconst CENTER_X  = this._canvas.width/2\n\t\tconst WINNER_TEXT = `The winner is ${winner.name}!`\n\n\t\tthis.context.beginPath()\n\t\tthis.context.font = '36px Arial'\n\t\tthis.context.textAlign = 'center'\n\t\tthis.context.fillStyle = '#fff'\n\t\tthis.context.fillText(WINNER_TEXT, CENTER_X, 150)\n\t}\n\n\tcheckWinner(player) {\n\t\tif (player.score.points == 10) {\n\t\t\tthis._state = 2\n\t\t\tthis._stop()\n\t\t\tthis._winner = player\n\t\t}\n\t}\n\n\tstart() {\n\t\tconst WIDTH  = this._canvas.width\n\t\tconst HEIGHT = this._canvas.height\n\n\t\tlet ball   = new Ball('white', 4, WIDTH/2, HEIGHT/2, 5, 5.5)\n\t\tlet player = new LocalPlayer(10, 100, 'white', 0, HEIGHT/2 - 50, 5)\n\t\tlet enemy  = new EnemyPlayer(10, 100, 'white', WIDTH - 10, HEIGHT/2 -50, 5)\n\n\t\tthis._world        = new World('black', WIDTH, HEIGHT)\n\t\tthis._world.player = player\n\t\tthis._world.enemy  = enemy\n\t\tthis._world.ball   = ball\n\t\tthis._world.init()\n\n\t\tthis._world.subscribe('score', this.checkWinner.bind(this))\n\n\t\twindow.requestAnimationFrame(this._update.bind(this))\n\t}\n}\n"]}