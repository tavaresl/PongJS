{"version":3,"sources":["../../src/components/World.js"],"names":["World","color","width","height","game","_color","_width","_height","_player","_ball","_enemy","_powerUps","stop","posY","reflect","posX","hasBlocked","scoreUp","reset","_notify","context","update","speedX","chase","stopChasing","fillStyle","fillRect","canvas","beginPath","strokeStyle","moveTo","lineTo","stroke","arc","Math","PI","fill","draw","subscribe","_checkCollision","bind","ball","player","enemy"],"mappings":"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","file":"World.js","sourcesContent":["import { Component } from './Component.js'\r\n\r\nexport class World extends Component {\r\n\tconstructor(color, width, height, game) {\r\n\t\tsuper()\r\n\t\tthis._color    = color\r\n\t\tthis._width    = width\r\n\t\tthis._height   = height\r\n\t\tthis._player   = {}\r\n\t\tthis._ball     = {}\r\n\t\tthis._enemy    = {}\r\n\t\tthis._powerUps = []\r\n\t}\r\n\r\n\tset ball(ball)     { this._ball = ball }\r\n\tset player(player) { this._player = player }\r\n\tset enemy(enemy)   { this._enemy = enemy }\r\n\t\r\n\tstop() {\r\n\t\tthis._ball.stop()\r\n\t\tthis._enemy.stop()\r\n\t\tthis._player.stop()\r\n\t}\r\n\r\n\t_checkCollision() {\r\n\t\tif (this._ball.posY <= 0 || this._ball.posY >= this._height) {\r\n\t\t\tthis._ball.reflect('y')\r\n\t\t}\r\n\r\n\t\tif (this._ball.posX >= 10 && this._ball.posX <= this._width - 10 ) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tthis._ball.reflect('x')\r\n\r\n\t\tif (this._ball.posX < 10 \r\n\t\t&& !this._player.hasBlocked(this._ball)) {\r\n\t\t\tthis._enemy.scoreUp()\r\n\t\t\tthis._ball.reset()\r\n\t\t\tthis._notify('score', this._enemy)\r\n\t\t}\r\n\t\telse if (this._ball.posX > this._width - 10\r\n\t\t&& !this._enemy.hasBlocked(this._ball)) {\r\n\t\t\tthis._player.scoreUp()\r\n\t\t\tthis._ball.reset()\r\n\t\t\tthis._notify('score', this._player)\r\n\t\t}\r\n\t}\r\n\r\n\tupdate(context) {\r\n\t\tthis._ball.update(context)\r\n\t\tthis._player.update(context)\r\n\t\tthis._enemy.update(context)\r\n\r\n\t\tif (this._ball.speedX > 0) {\r\n\t\t\tthis._enemy.chase(this._ball)\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis._enemy.stopChasing()\r\n\t\t}\r\n\t}\r\n\r\n\tdraw(context) {\r\n\t\tcontext.fillStyle = this._color\r\n\t\tcontext.fillRect(0, 0, context.canvas.width, context.canvas.height)\r\n\r\n\t\tcontext.beginPath()\r\n\t\tcontext.strokeStyle = '#ccc'\r\n\t\tcontext.moveTo(this._width/2, 0)\r\n\t\tcontext.lineTo(this._width/2, this._height)\r\n\t\tcontext.stroke()\r\n\t\tcontext.strokeStyle = '#000'\r\n\r\n\t\tcontext.beginPath()\r\n\t\tcontext.fillStyle= '#666'\r\n\t\tcontext.arc(this._width/2, this._height/2, 15, 0, 2*Math.PI)\r\n\t\tcontext.fill()\r\n\r\n\r\n\t\tthis._ball.draw(context)\r\n\t\tthis._player.draw(context)\r\n\t\tthis._enemy.draw(context)\r\n\t}\r\n\r\n\tinit() {\r\n\t\tthis._ball.subscribe('move', this._checkCollision.bind(this))\r\n\t}\r\n}\r\n"]}